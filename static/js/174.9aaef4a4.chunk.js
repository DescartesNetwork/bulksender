(globalThis.webpackChunkbulk_sender=globalThis.webpackChunkbulk_sender||[]).push([[174],{79706:(e,t,s)=>{"use strict";s.r(t),s.d(t,{Page:()=>me,Widget:()=>fe,widgetConfig:()=>ge});var n=s(55754),r=s(98846),i=s(99019),a=s(92950),o=s(95418);const d={"logo-telegram":s.p+"static/media/icon-telegram.2450489f40d03000fe65fc1c6f238d85.svg"};var l=s(45263);const c=(0,a.forwardRef)((({name:e,className:t,...s},n)=>{const r=t?"anticon "+t:"anticon";return(0,l.jsx)("span",{className:r,...s,children:d[e]?(0,l.jsx)("ion-icon",{ref:n,src:d[e]}):(0,l.jsx)("ion-icon",{ref:n,name:e})})}));var u=s(15190);const h={appId:"bulk_sender",url:"https://tuphan-dn.github.io/bulksender/index.js"},p={devnet:{node:"https://api.devnet.solana.com",spltAddress:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",splataAddress:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL",bulksenderAddress:"FjkVzT6QJCQrgoZ8VoyAqysD5Mfa73ekpXWe9zDprWRA"},testnet:{node:"https://api.testnet.solana.com",spltAddress:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",splataAddress:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL",bulksenderAddress:""},mainnet:{node:"https://api.mainnet-beta.solana.com",spltAddress:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",splataAddress:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL",bulksenderAddress:"8WB9yeJ946594RHtxdNoKbwC2y13yCwJCtSY1mAeLWu1"}},m={manifest:{development:{...h},staging:{...h},production:{...h}}[u.OB],sol:p[u.ef]};var g=s(34559),f=s(19289);let y;!function(e){e[e.None=0]="None",e[e.Estimating=1]="Estimating",e[e.Estimated=2]="Estimated",e[e.Sending=3]="Sending",e[e.Done=4]="Done"}(y||(y={}));const x="main",j={mintAddress:"",data:[],decimalized:!1,status:y.None},w=(0,f.createAsyncThunk)("main/setData",(async e=>({data:e,status:y.None}))),b=(0,f.createAsyncThunk)("main/setMintAddress",(async e=>({mintAddress:e,status:y.None}))),v=(0,f.createAsyncThunk)("main/setDecimalized",(async e=>({decimalized:e,status:y.None}))),k=(0,f.createAsyncThunk)("main/setStatus",(async e=>({status:e}))),A=(0,f.createSlice)({name:x,initialState:j,reducers:{},extraReducers:e=>{e.addCase(w.fulfilled,((e,{payload:t})=>{Object.assign(e,t)})).addCase(b.fulfilled,((e,{payload:t})=>{Object.assign(e,t)})).addCase(v.fulfilled,((e,{payload:t})=>{Object.assign(e,t)})).addCase(k.fulfilled,((e,{payload:t})=>{Object.assign(e,t)}))}}).reducer;var S=s(71256);class C extends Error{constructor(e,t=""){super(e),this.info=void 0,this.name=`Error: ${e}`,this.info={txId:t}}}const T=class{constructor(e,t=[]){this.nodeUrl=void 0,this.connection=void 0,this.errorMapping=void 0,this.throwError=(e,t)=>{const s="Transaction failed";if(!e)throw new C(s,t);const n=e.InstructionError||[];if("string"==typeof n[1])throw new C(n[1],t);const{Custom:r}=n[1]||{};if("number"!==typeof r)throw new C(s,t);throw new C(this.errorMapping[r]||s,t)},this.sendTransaction=async e=>{const t=e.serialize(),s=await this.connection.sendRawTransaction(t,{skipPreflight:!0,preflightCommitment:"confirmed"}),{value:{err:n}}=await this.connection.confirmTransaction(s,"confirmed");return n?this.throwError(n,s):s},this.addRecentCommitment=async e=>{const{blockhash:t}=await this.connection.getRecentBlockhash("confirmed");return e.recentBlockhash=t,e},this.addSignature=(e,{publicKey:t,signature:s})=>(e.feePayer||(e.feePayer=t),e.addSignature(t,s),e),this.nodeUrl=e,this.errorMapping=t,this.connection=new S.Connection(this.nodeUrl,"confirmed")}},I=s(70320),P=["Invalid instruction","Incorrect program id","Operation overflowed","Invalid owner"];const R=class extends T{constructor(e,t,s,n){if(super(n,P),this.bulksenderProgramId=void 0,this.spltProgramId=void 0,this.splataProgramId=void 0,this._splt=void 0,this.checkedTransfer=async(e,t,s,n)=>{if(!o.account.isAddress(t))throw new Error("Invalid destination address");if(!o.account.isAddress(s))throw new Error("Invalid mint address");const r=await n.getAddress(),i=o.account.fromAddress(r),a=await this._splt.deriveAssociatedAddress(r,s),d=await this._splt.deriveAssociatedAddress(t,s),l=o.account.fromAddress(a),c=o.account.fromAddress(t),u=o.account.fromAddress(d),h=o.account.fromAddress(s);let p=new S.Transaction;p=await this.addRecentCommitment(p);const m=new I.struct([{key:"code",type:"u8"},{key:"amount",type:"u64"}],{code:0,amount:e}),g=new S.TransactionInstruction({keys:[{pubkey:i,isSigner:!0,isWritable:!0},{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:c,isSigner:!1,isWritable:!1},{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:h,isSigner:!1,isWritable:!1},{pubkey:S.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:this.spltProgramId,isSigner:!1,isWritable:!1},{pubkey:S.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:this.splataProgramId,isSigner:!1,isWritable:!1}],programId:this.bulksenderProgramId,data:m.toBuffer()});p.add(g),p.feePayer=i;const f=await n.rawSignTransaction(p);this.addSignature(p,f);return{txId:await this.sendTransaction(p)}},this.buildCheckedBulkTransferTransaction=async(e,t,s,n)=>{for(const m of t)if(!o.account.isAddress(m))throw new Error(`Invalid destination address: ${m}`);for(const o of e)if(!o)throw new Error(`Invalid amount: ${o}`);if(!o.account.isAddress(s))throw new Error("Invalid mint address");if(e.length!==t.length)throw new Error(`The number of amounts and the number of addresses are unmatcher (${e.length}, ${t.length})`);const r=await n.getAddress(),i=o.account.fromAddress(r),a=await this._splt.deriveAssociatedAddress(r,s),d=o.account.fromAddress(a),l=o.account.fromAddress(s);let c=new S.Transaction;c=await this.addRecentCommitment(c);const u=new I.struct([{key:"code",type:"u8"},{key:"num_txs",type:"u32"},{key:"amounts",type:`[u64;${e.length}]`}],{code:1,num_txs:e.length,amounts:e});let h=[{pubkey:i,isSigner:!0,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!0},{pubkey:l,isSigner:!1,isWritable:!1},{pubkey:S.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:this.spltProgramId,isSigner:!1,isWritable:!1},{pubkey:S.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:this.splataProgramId,isSigner:!1,isWritable:!1}];for(const m of t){const e=await this._splt.deriveAssociatedAddress(m,s),t=o.account.fromAddress(m),n=o.account.fromAddress(e);h.push({pubkey:t,isSigner:!1,isWritable:!1}),h.push({pubkey:n,isSigner:!1,isWritable:!0})}const p=new S.TransactionInstruction({keys:h,programId:this.bulksenderProgramId,data:u.toBuffer()});return c.add(p),c.feePayer=i,c},this.simulateBulkTransfer=async(e,t,s,n)=>{const r=await this.buildCheckedBulkTransferTransaction(e,t,s,n),{value:{err:i}}=await this.connection.simulateTransaction(r);return!i},this.checkedBulkTransfer=async(e,t,s,n)=>{const r=await this.buildCheckedBulkTransferTransaction(e,t,s,n),i=await n.rawSignTransaction(r);this.addSignature(r,i);return{txId:await this.sendTransaction(r)}},!o.account.isAddress(e))throw new Error("Invalid bulksender program address");if(!o.account.isAddress(t))throw new Error("Invalid SPL token program address");if(!o.account.isAddress(s))throw new Error("Invalid SPL associated token program address");this.bulksenderProgramId=o.account.fromAddress(e),this.spltProgramId=o.account.fromAddress(t),this.splataProgramId=o.account.fromAddress(s),this._splt=new o.SPLT(t,s,n)}},B=e=>{try{return BigInt(e)}catch(t){return BigInt(0)}},{sol:{spltAddress:E,splataAddress:W,bulksenderAddress:N,node:D}}=m,_=({disabled:e=!1,onChange:t=(()=>{})})=>{const[s,r]=(0,a.useState)(0),[o,d]=(0,a.useState)([]),u=(0,n.useDispatch)(),{main:{data:h,mintAddress:p,status:m}}=(0,n.useSelector)((e=>e)),f=(0,a.useCallback)((async()=>{const{sentre:{wallet:e}}=window;if(!e)return d([]);await u(k(y.Estimating));const t=new R(N,E,W,D);let s=[...h];const n=[[]];for(;s.length;){const[a,o]=s.shift(),l=[...n[n.length-1],[a,o]];await(0,g.sA)(250);let c=!1;try{c=await t.simulateBulkTransfer(l.map((([e,t])=>B(t))),l.map((([e,t])=>e)),p,e)}catch(i){c=!1}if(!c&&l.length<=1)return d([]),window.notify({type:"error",description:"Cannot handle the transaction. Make sure that your SOL balance is enough to pay fees."}),u(k(y.None));c?n[n.length-1]=l:n.push([[a,o]]),r(n.flat().length/h.length)}return d(n),u(k(y.Estimated))}),[h,u,p]);return(0,a.useEffect)((()=>(t(o),()=>r(0))),[o,t]),(0,l.jsxs)(i.Button,{type:"primary",icon:(0,l.jsx)(c,{name:"send"}),onClick:f,disabled:e,loading:m===y.Estimating,block:!0,children:["Estimate ",Math.floor(100*s),"%"]})},O=({disabled:e=!1})=>{const t=(0,n.useDispatch)(),{main:{data:s}}=(0,n.useSelector)((e=>e)),r=(0,a.useCallback)((async()=>{const e=[];for(const[t,n]of s){const s=e.findIndex((([e])=>e===t));s>=0?e[s][1]=(B(e[s][1])+B(n)).toString():e.push([t,n])}await t(w(e))}),[s,t]);return(0,l.jsx)(i.Button,{type:"text",icon:(0,l.jsx)(c,{name:"git-merge-outline"}),onClick:r,disabled:e,block:!0,children:"Merge"})},{sol:{spltAddress:Q,splataAddress:q,bulksenderAddress:L,node:z}}=m,U=({bulk:e=[],disabled:t=!1})=>{const[s,r]=(0,a.useState)(!1),{mintAddress:o}=(0,n.useSelector)((e=>e.main)),d=(0,a.useCallback)((async()=>{r(!0);const t=new R(L,Q,q,z);for(const n of e)try{const{sentre:{wallet:e}}=window;if(!e)return;const{txId:s}=await t.checkedBulkTransfer(n.map((([e,t])=>B(t))),n.map((([e,t])=>e)),o,e);window.notify({type:"success",description:"Successfully transfer tokens. Click to view details.",onClick:()=>window.open((0,g.kU)(s),"_blank")})}catch(s){window.notify({type:"error",description:s.message})}return r(!1)}),[e,o]);return(0,l.jsx)(i.Button,{type:"primary",icon:(0,l.jsx)(c,{name:"send"}),onClick:d,disabled:t,loading:s,block:!0,children:"Send"})},M=()=>{const[e,t]=(0,a.useState)(!1),[s,d]=(0,a.useState)([]),{data:u,mintAddress:h,status:p}=(0,n.useSelector)((e=>e.main)),{accounts:m}=(0,r.useAccount)(),{wallet:{address:g}}=(0,r.useWallet)(),f=(0,a.useMemo)((()=>{if(!u||!u.length)return!1;return u.filter((([e],t)=>{const s=u.findIndex((([t])=>e===t));return s!==t&&s>-1})).length>0}),[u]),x=(0,a.useCallback)((async()=>{if(!u||!u.length)return t(!0);if(!o.account.isAddress(g))return t("Please connect your wallet");if(!o.account.isAddress(h))return t("Please select a token to send");const e=u.filter((([e,t])=>!o.account.isAddress(e)||!B(t)));if(e.length>0)return t(!0);const{sentre:{splt:s}}=window,n=await s.deriveAssociatedAddress(g,h),{amount:r}=m[n]||{amount:BigInt(0)},i=u.reduce(((e,[t,s])=>e+B(s)),BigInt(0));return t(r<i&&"Not enough token balance")}),[u,h,m,g]);return(0,a.useEffect)((()=>{x()}),[x]),(0,l.jsxs)(i.Row,{gutter:[16,16],children:[(0,l.jsx)(i.Col,{span:24,children:"string"===typeof e?(0,l.jsxs)(i.Space,{children:[(0,l.jsx)(c,{name:"information-circle-outline",style:{color:"#F2323F"}}),(0,l.jsx)(i.Typography.Text,{type:"danger",children:e})]}):(0,l.jsxs)(i.Space,{children:[(0,l.jsx)(c,{name:"information-circle-outline"}),(0,l.jsxs)(i.Typography.Text,{type:s.length?void 0:"secondary",children:["To send tokens to ",(0,l.jsx)("strong",{children:u.length})," address(es), you will need to sign ",(0,l.jsx)("strong",{children:s.length})," time(s) with the total estimated fee is ~",.005*s.length," SOL."]})]})}),(0,l.jsx)(i.Col,{span:12,children:(0,l.jsx)(O,{disabled:!f||!!e||[y.Estimated,y.Sending,y.Done].includes(p)})}),(0,l.jsx)(i.Col,{span:12,children:[y.None,y.Estimating].includes(p)?(0,l.jsx)(_,{disabled:!!e,onChange:d}):(0,l.jsx)(U,{bulk:s,disabled:!!e})})]})};var $=s(24656),F=s.n($);const J=()=>{const[e,t]=(0,a.useState)(!1),s=(0,n.useDispatch)();return(0,l.jsx)(i.Row,{gutter:[24,24],children:(0,l.jsx)(i.Col,{span:24,style:{marginBottom:16},children:(0,l.jsx)(i.Upload.Dragger,{accept:".csv,.txt",beforeUpload:async e=>(t(!0),s(v(!1)),s(w(await(e=>new Promise(((t,s)=>F().parse(e,{skipEmptyLines:!0,complete:({data:e})=>t(e)}))))(e))),t(!1),!1),onRemove:async()=>(t(!0),s(w([])),t(!1),!0),maxCount:1,children:(0,l.jsxs)(i.Space,{direction:"vertical",size:"large",align:"center",children:[(0,l.jsx)(i.Typography.Title,{level:3,children:"Click or Drop file to upload"}),(0,l.jsxs)(i.Typography.Text,{children:["The accepted file types are ",(0,l.jsx)("code",{children:".csv"}),", ",(0,l.jsx)("code",{children:".txt"}),"."]}),(0,l.jsx)(i.Button,{type:"primary",icon:(0,l.jsx)(c,{name:"cloud-upload-outline"}),loading:e,children:"Upload"})]})})})})},V=[void 0],G=({mintAddress:e,size:t=24,icon:s=(0,l.jsx)(c,{name:"diamond-outline"}),reversed:n=!1,...d})=>{const[u,h]=(0,a.useState)(V),{tokenProvider:p}=(0,r.useMint)(),{pools:m}=(0,r.usePool)(),g=(0,a.useCallback)((async e=>{const t=await p.findByAddress(e);if(null!==t&&void 0!==t&&t.logoURI)return t.logoURI}),[p]),f=(0,a.useCallback)((async()=>{if(!o.account.isAddress(e))return h(V);const t=Object.values(m).find((({mint_lpt:t})=>t===e));if(t){const{mint_a:e,mint_b:s}=t,r=await Promise.all([e,s].map(g));return n&&r.reverse(),h(r)}const s=await g(e);return h([s])}),[e,n,g,m]);return(0,a.useEffect)((()=>{f()}),[f]),1===u.length?(0,l.jsx)(i.Avatar,{src:u[0],size:t,style:{backgroundColor:"#2D3355",border:"none"},...d,children:s}):(0,l.jsx)(i.Avatar.Group,{style:{display:"block",whiteSpace:"nowrap"},...d,children:u.map(((e,n)=>(0,l.jsx)(i.Avatar,{src:e,size:t,style:{backgroundColor:"#2D3355",border:"none"},children:s},n)))})},K="Unknown Token",Z=({mintAddress:e,separator:t=" \u2022 ",reversed:s=!1})=>{const[n,i]=(0,a.useState)(K),{tokenProvider:d}=(0,r.useMint)(),{pools:c}=(0,r.usePool)(),u=(0,a.useCallback)((async e=>{const t=await d.findByAddress(e);return null!==t&&void 0!==t&&t.name?t.name:K}),[d]),h=(0,a.useCallback)((async()=>{if(!o.account.isAddress(e))return i(K);const n=Object.values(c).find((({mint_lpt:t})=>t===e));if(n){const{mint_a:e,mint_b:r}=n,a=await Promise.all([e,r].map(u));return s&&a.reverse(),i(`${a.join(t)} LP`)}const r=await u(e);return i(r)}),[e,s,u,c,t]);return(0,a.useEffect)((()=>{h()}),[h]),(0,l.jsx)("span",{children:n})},Y="TOKN",H=({mintAddress:e,separator:t=" \u2022 ",reversed:s=!1})=>{const[n,i]=(0,a.useState)(Y),{tokenProvider:d}=(0,r.useMint)(),{pools:c}=(0,r.usePool)(),u=(0,a.useCallback)((async e=>{const t=await d.findByAddress(e);return null!==t&&void 0!==t&&t.symbol?t.symbol:e.substring(0,4)}),[d]),h=(0,a.useCallback)((async()=>{if(!o.account.isAddress(e))return i(Y);const n=Object.values(c).find((({mint_lpt:t})=>t===e));if(n){const{mint_a:e,mint_b:r}=n,a=await Promise.all([e,r].map(u));return s&&a.reverse(),i(a.join(t))}const r=await u(e);return i(r)}),[e,s,u,c,t]);return(0,a.useEffect)((()=>{h()}),[h]),(0,l.jsx)("span",{children:n})},X=e=>{const[t,s]=(0,a.useState)(void 0),{getDecimals:n}=(0,r.useMint)(),i=(0,a.useCallback)((async()=>{try{const t=await n(e);return s(t)}catch(t){return s(void 0)}}),[e,n]);return(0,a.useEffect)((()=>{i()}),[i]),t},ee=(e,t,s)=>o.account.isAddress(e)&&void 0!==t&&void 0!==s?{mintAddress:e,amount:t,decimals:s,balance:Number(o.utils.undecimalize(t,s))}:{amount:BigInt(0),decimals:0,balance:0},te=e=>{const{wallet:{address:t,lamports:s}}=(0,r.useWallet)(),{accounts:n}=(0,r.useAccount)(),{amount:i,mint:a}=n[e]||{},d=X(a)||0;return o.account.isAddress(t)&&o.account.isAddress(e)?e===t?ee(o.DEFAULT_EMPTY_ADDRESS,s,9):ee(a,i,d):ee()},se=()=>{const e=(0,n.useDispatch)(),{main:{mintAddress:t}}=(0,n.useSelector)((e=>e)),{accounts:s}=(0,r.useAccount)(),{balance:d}=(e=>{const[t,s]=(0,a.useState)(""),{wallet:{address:n}}=(0,r.useWallet)(),i=te(t);return(0,a.useEffect)((()=>{(async()=>{if(!o.account.isAddress(n)||!o.account.isAddress(e))return s("");const{sentre:{splt:t}}=window;try{const r=await t.deriveAssociatedAddress(n,e);s(r)}catch(r){return s("")}})()})),i})(t);return(0,l.jsx)(i.Card,{children:(0,l.jsxs)(i.Row,{gutter:[16,16],children:[(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(i.Select,{size:"large",placeholder:"Select token",style:{width:"100%"},onChange:t=>e(b(t)),children:Object.values(s).map((({mint:e},t)=>(0,l.jsx)(i.Select.Option,{value:e,children:(0,l.jsxs)(i.Space,{align:"center",children:[(0,l.jsx)(G,{mintAddress:e}),(0,l.jsx)(i.Typography.Text,{type:"secondary",children:(0,l.jsx)(H,{mintAddress:e})}),(0,l.jsx)(i.Typography.Text,{children:(0,l.jsx)(Z,{mintAddress:e})})]})},t)))})}),(0,l.jsx)(i.Col,{span:24,children:(0,l.jsxs)(i.Space,{children:[(0,l.jsx)(i.Typography.Text,{type:"secondary",children:"Balance:"}),(0,l.jsx)(i.Typography.Text,{children:(0,g.uR)(d).format("0,0.[0000]")}),(0,l.jsx)(i.Typography.Text,{children:(0,l.jsx)(H,{mintAddress:t})})]})})]})})},ne=({index:e,accountAddress:t,amount:s})=>{const r=(0,n.useDispatch)(),{main:{data:a,mintAddress:d}}=(0,n.useSelector)((e=>e)),u=X(d)||0,h=o.account.isAddress(t)?B(s)?"":"Invalid amount":"Invalid address",p=a.slice(0,e).findIndex((([e])=>e===t)),m=p>=0?`Duplicated address to #${p}`:"",g=B(s)?o.utils.undecimalize(B(s),u):s;return(0,l.jsxs)(i.Row,{gutter:[16,8],children:[(0,l.jsx)(i.Col,{span:24,children:(0,l.jsxs)(i.Row,{gutter:[16,8],align:"middle",wrap:!1,children:[(0,l.jsx)(i.Col,{children:(0,l.jsxs)(i.Typography.Text,{type:"secondary",children:["#",e+1]})}),(0,l.jsx)(i.Col,{span:12,children:(0,l.jsx)(i.Tooltip,{title:t,children:(0,l.jsx)(i.Typography.Text,{ellipsis:!0,children:t})})}),(0,l.jsx)(i.Col,{flex:"auto",children:(0,l.jsxs)(i.Space,{children:[(0,l.jsx)(i.Typography.Text,{children:g}),(0,l.jsx)(i.Typography.Text,{children:(0,l.jsx)(H,{mintAddress:d})})]})}),(0,l.jsx)(i.Col,{children:(0,l.jsxs)(i.Space,{align:"center",children:[m?(0,l.jsx)(i.Tooltip,{title:m,children:(0,l.jsx)(c,{name:"alert-circle-outline",style:{color:"#FCB017"}})}):null,h?(0,l.jsx)(i.Tooltip,{title:h,children:(0,l.jsx)(c,{name:"warning-outline",style:{color:"#F2323F"}})}):null,(0,l.jsx)(i.Button,{type:"text",icon:(0,l.jsx)(c,{name:"trash-outline"}),onClick:()=>(e=>{const t=[...a];return t.splice(e,1),r(w(t))})(e)})]})})]})}),(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(i.Divider,{style:{margin:0}})})]})};let re;const ie=(0,a.forwardRef)((({max:e,onValue:t=(()=>{}),onChange:s=(()=>{}),...n},r)=>{var o;const[d,u]=(0,a.useState)(""),[h,p]=(0,a.useState)(null),m=(0,a.useRef)(r),g=(0,a.useCallback)((s=>{const n=e=>{re&&(clearTimeout(re),re=void 0),u(e),re=setTimeout((()=>u("")),500)};return/^\d*(\.\d*)?$/.test(s)?e&&parseFloat(s)>parseFloat(e.toString())?n("Not enough balance"):t(s):n("Invalid character")}),[e,t]);return null!==h&&(null===m||void 0===m||null===(o=m.current)||void 0===o||o.setSelectionRange(h,h)),(0,l.jsx)(i.Tooltip,{title:(0,l.jsxs)(i.Space,{children:[(0,l.jsx)(c,{name:"warning"}),d]}),visible:!!d,children:(0,l.jsx)(i.Input,{...n,onChange:e=>{s(e),p(e.target.selectionStart),g(e.target.value||"")},ref:m})})})),ae=()=>{const e=(0,n.useDispatch)(),[t,s]=(0,a.useState)(""),[r,d]=(0,a.useState)(""),{main:{data:u,mintAddress:h}}=(0,n.useSelector)((e=>e)),p=X(h)||0;return(0,l.jsxs)(i.Row,{gutter:[16,8],align:"middle",wrap:!1,children:[(0,l.jsx)(i.Col,{span:12,children:(0,l.jsx)(i.Input,{placeholder:"Address",value:t,onChange:e=>s(e.target.value)})}),(0,l.jsx)(i.Col,{flex:"auto",children:(0,l.jsx)(ie,{placeholder:"Amount",value:r,onValue:e=>d(e)})}),(0,l.jsx)(i.Col,{children:(0,l.jsx)(i.Button,{type:"primary",icon:(0,l.jsx)(c,{name:"add-outline"}),onClick:async()=>{if(!o.account.isAddress(t))return window.notify({type:"warning",description:"Invalid address"});if(!Number(r))return window.notify({type:"warning",description:"Invalid amount"});const n=[...u];n.push([t,o.utils.decimalize(r,p).toString()]),await e(w(n)),await s(""),await d("")},disabled:!o.account.isAddress(h)})})]})},oe=()=>{const e=(0,n.useDispatch)(),{main:{data:t,decimalized:s,mintAddress:r}}=(0,n.useSelector)((e=>e)),a=X(r)||0;return(0,l.jsxs)(i.Row,{gutter:[8,8],justify:"end",align:"middle",children:[(0,l.jsx)(i.Col,{children:(0,l.jsx)(i.Typography.Text,{children:"Decimals?"})}),(0,l.jsx)(i.Col,{children:(0,l.jsx)(i.Switch,{checked:s,onChange:async s=>{const n=t.map((([e,t])=>[e,s?o.utils.decimalize(t,a).toString():o.utils.undecimalize(B(t),a)]));await e(v(s)),await e(w(n))},checkedChildren:a,unCheckedChildren:a,disabled:!a})})]})},de=()=>{const{main:{data:e}}=(0,n.useSelector)((e=>e));return(0,l.jsxs)(i.Row,{gutter:[16,16],children:[(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(oe,{})}),(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(i.Card,{bodyStyle:{padding:16,height:384},className:"scrollbar",children:(0,l.jsxs)(i.Row,{gutter:[8,8],children:[e.length?null:(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(i.Typography.Text,{type:"secondary",children:"No Data"})}),e.map((([e,t],s)=>(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(ne,{index:s,accountAddress:e,amount:t})},e+s))),(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(ae,{})}),(0,l.jsx)(i.Col,{span:24})]})})})]})},le=()=>(0,l.jsxs)(i.Row,{gutter:[24,24],justify:"center",children:[(0,l.jsx)(i.Col,{span:24,style:{maxWidth:1200},children:(0,l.jsxs)(i.Row,{gutter:[24,24],children:[(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(i.Typography.Title,{level:3,children:"Solana Bulk Sender"})}),(0,l.jsx)(i.Col,{xs:{span:24},md:{span:12},children:(0,l.jsxs)(i.Row,{gutter:[24,24],children:[(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(se,{})}),(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(J,{})})]})}),(0,l.jsx)(i.Col,{xs:{span:24},md:{span:12},children:(0,l.jsxs)(i.Row,{gutter:[24,24],children:[(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(de,{})}),(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(M,{})})]})})]})}),(0,l.jsx)(i.Col,{span:24})]}),ce=()=>{const{ui:{width:e,infix:t}}=(0,r.useUI)();return(0,l.jsx)(i.Row,{gutter:[24,24],children:(0,l.jsxs)(i.Col,{span:24,children:[(0,l.jsx)(i.Typography.Title,{level:5,children:"BulkSender Widget"}),(0,l.jsxs)(i.Typography.Text,{children:["Env: ",u.OB," - ",e,"px - ",t]})]})})};var ue=s(85912);const he=(0,f.configureStore)({middleware:e=>e(ue.h),devTools:(0,ue.$)("bulk_sender"),reducer:{main:A}}),{manifest:{appId:pe}}=m,me=()=>(0,l.jsx)(r.UIProvider,{appId:pe,antd:{prefixCls:pe},children:(0,l.jsx)(r.WalletProvider,{children:(0,l.jsx)(r.AccountProvider,{children:(0,l.jsx)(r.MintProvider,{children:(0,l.jsx)(r.PoolProvider,{children:(0,l.jsx)(n.Provider,{store:he,children:(0,l.jsx)(le,{})})})})})})}),ge={size:"small",type:"solid"},fe=()=>(0,l.jsx)(r.UIProvider,{appId:pe,antd:{prefixCls:pe},children:(0,l.jsx)(r.WalletProvider,{children:(0,l.jsx)(r.AccountProvider,{children:(0,l.jsx)(r.MintProvider,{children:(0,l.jsx)(r.PoolProvider,{children:(0,l.jsx)(n.Provider,{store:he,children:(0,l.jsx)(ce,{})})})})})})})},67751:(e,t,s)=>{"use strict";s.d(t,{U:()=>r});var n=s(15822);class r{static set(e,t,s=n.qf){this.mapCache.set(e,t),setTimeout((()=>{this.mapCache.delete(e)}),s.ttl)}static get(e){return this.mapCache.get(e)}}r.mapCache=new Map},15822:(e,t,s)=>{"use strict";s.d(t,{qf:()=>n,Dt:()=>r});const n={ttl:3e4},r={limit:{calls:10,time:1e3},cache:n}},21411:(e,t,s)=>{"use strict";var n=s(15822),r=s(85964),i=s(67751);class a{static getSingleFlight(e){const t=JSON.stringify(e);if(this.mapInstance.has(t)){const e=this.mapInstance.get(t);if(e)return e}let s=new o(e);return this.mapInstance.set(t,s),s}static async load(e,t,s={}){"object"===typeof e&&(e=JSON.stringify(e));let n=a.getSingleFlight(s);a.mapInstance.set(e,n);const i=new r.g(e);return n.load(i,t)}}a.mapInstance=new Map;class o{constructor(e){this.config=void 0,this.intervalRequest=void 0,this.timeLogs=[],this.mapRequestCalling=new Map,this.requestQueue=[],this.config=Object.assign(n.Dt,e)}async load(e,t){const s=i.U.get(e.key);if(s)return Promise.resolve(s);let n=!1,r=this.mapRequestCalling.get(e.key);return r||(r=e,n=!0,this.mapRequestCalling.set(r.key,r)),new Promise(((e,s)=>{if(!r)return s("Not found request!");r.add(e,s),n&&this.fetch(r,t)}))}fetch(e,t){if(!this.validateLimit())return this.addRequestQueue(e,t);this.createTimeLogs(),t().then((t=>{i.U.set(e.key,t,this.config.cache),e.resolves(t)})).catch((t=>{e.rejects(t)})).finally((()=>{this.mapRequestCalling.delete(e.key),this.fetchRequestQueue(t)}))}fetchRequestQueue(e){if(!this.validateLimit())return;const t=this.requestQueue.shift();t&&this.load(t,e),0===this.requestQueue.length&&this.intervalRequest&&clearInterval(this.intervalRequest)}addRequestQueue(e,t){var s;this.requestQueue.push(e),this.intervalRequest=setInterval((()=>{this.fetchRequestQueue(t)}),null===(s=this.config.limit)||void 0===s?void 0:s.time)}validateLimit(){return!0}createTimeLogs(){var e;if(!this.config.limit)return;const t=(new Date).getTime();this.timeLogs.push(t),this.timeLogs.length>(null===(e=this.config.limit)||void 0===e?void 0:e.calls)&&this.timeLogs.shift()}}},85964:(e,t,s)=>{"use strict";s.d(t,{g:()=>n});class n{constructor(e){this.key="",this.resolveQueue=[],this.rejectQueue=[],this.key=e}add(e,t){this.resolveQueue.push(e),this.rejectQueue.push(t)}resolves(e){for(;this.resolveQueue.length>0;){this.resolveQueue.shift()(e)}}rejects(e){for(;this.rejectQueue.length>0;){this.rejectQueue.shift()(e)}}}},85912:(e,t,s)=>{"use strict";s.d(t,{$:()=>n,h:()=>r});const n=e=>!1;BigInt.prototype.toJSON=function(){return this.toString()};const r={serializableCheck:{isSerializable:e=>"undefined"===typeof e||null===e||"string"===typeof e||"boolean"===typeof e||"number"===typeof e||Array.isArray(e)||(e=>{if(null===e)return!1;const t=Object.getPrototypeOf(e);return null!==t&&null===Object.getPrototypeOf(t)})(e)||"bigint"===typeof e}}},15190:(e,t,s)=>{"use strict";s.d(t,{OB:()=>d,ef:()=>l});const n="sentre",r=window.localStorage,i=e=>{try{return e?JSON.parse(e):null}catch(t){return null}},a={set:(e,t)=>{let s=i(r.getItem(n));s&&"object"===typeof s||(s={}),s[e]=t,r.setItem(n,JSON.stringify(s))},get:e=>{let t=i(r.getItem(n));return t&&"object"===typeof t?t[e]:null},clear:e=>{a.set(e,null)}},o=a,d="production",l=(()=>{switch(o.get("network")){case"devnet":return"devnet";case"testnet":return"testnet";default:return"mainnet"}})()},34559:(e,t,s)=>{"use strict";s.d(t,{sA:()=>o,kU:()=>d,uR:()=>l});var n=s(95418),r=s(16200),i=s.n(r),a=s(15190);s(21411);const o=e=>new Promise((t=>setTimeout(t,e))),d=e=>n.account.isAddress(e)?`https://explorer.solana.com/address/${e}?cluster=${a.ef}`:`https://explorer.solana.com/tx/${e}?cluster=${a.ef}`,l=e=>e?i()(e):i()("0")},46601:()=>{},89214:()=>{},85568:()=>{},52361:()=>{},94616:()=>{},55024:()=>{}}]);
//# sourceMappingURL=174.9aaef4a4.chunk.js.map