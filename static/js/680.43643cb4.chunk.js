(self.webpackChunkbulk_sender=self.webpackChunkbulk_sender||[]).push([[680],{4337:function(e,n,r){"use strict";r.r(n),r.d(n,{Page:function(){return fe},Widget:function(){return he},widgetConfig:function(){return xe}});var t=r(55754),s=r(49142),a=r(78589),i=r(93433),c=r(37762),o=r(15861),u=r(29439),d=r(87757),l=r.n(d),p=r(92950),f=r(95418),x=r(1413),h=r(45987);var v={"logo-telegram":r.p+"static/media/icon-telegram.2450489f40d03000fe65fc1c6f238d85.svg"},m=r(45263),b=["name","className"],g=(0,p.forwardRef)((function(e,n){var r=e.name,t=e.className,s=(0,h.Z)(e,b),a=t?"anticon "+t:"anticon";return(0,m.jsx)("span",(0,x.Z)((0,x.Z)({className:a},s),{},{children:v[r]?(0,m.jsx)("ion-icon",{ref:n,src:v[r]}):(0,m.jsx)("ion-icon",{ref:n,name:r})}))})),k=r(63805);var y,w={appId:"bulk_sender",url:"https://tuphan-dn.github.io/bulksender/index.js",senhub:"senhub@https://descartesnetwork.github.io/senhub/index.js"},j={devnet:{node:"https://api.devnet.solana.com",spltAddress:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",splataAddress:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL",bulksenderAddress:"FjkVzT6QJCQrgoZ8VoyAqysD5Mfa73ekpXWe9zDprWRA"},testnet:{node:"https://api.testnet.solana.com",spltAddress:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",splataAddress:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL",bulksenderAddress:""},mainnet:{node:"https://api.mainnet-beta.solana.com",spltAddress:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",splataAddress:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL",bulksenderAddress:""}},A={manifest:{development:(0,x.Z)({},w),staging:(0,x.Z)({},w),production:(0,x.Z)({},w)}[k.OB],sol:j[k.ef]},C=r(16200),T=r.n(C),S=function(e){try{return BigInt(e)}catch(n){return BigInt(0)}},Z=r(19289),I="main",P=(0,Z.createAsyncThunk)("".concat(I,"/setData"),function(){var e=(0,o.Z)(l().mark((function e(n){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{data:n});case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),B=(0,Z.createAsyncThunk)("".concat(I,"/setMintAddress"),function(){var e=(0,o.Z)(l().mark((function e(n){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{mintAddress:n});case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),W=(0,Z.createSlice)({name:I,initialState:{mintAddress:"",data:[]},reducers:{},extraReducers:function(e){e.addCase(P.fulfilled,(function(e,n){var r=n.payload;Object.assign(e,r)})).addCase(B.fulfilled,(function(e,n){var r=n.payload;Object.assign(e,r)}))}}).reducer,R=r(15671),E=r(60136),_=r(27277),N=r(71256),O=function(e){(0,E.Z)(r,e);var n=(0,_.Z)(r);function r(e){var t,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return(0,R.Z)(this,r),(t=n.call(this,e)).info=void 0,t.name="Error: ".concat(e),t.info={txId:s},t}return r}((0,r(98737).Z)(Error)),D=function e(n){var r=this,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];(0,R.Z)(this,e),this.nodeUrl=void 0,this.connection=void 0,this.errorMapping=void 0,this.throwError=function(e,n){var t="Transaction failed";if(!e)throw new O(t,n);var s=e.InstructionError||[];if("string"==typeof s[1])throw new O(s[1],n);var a=(s[1]||{}).Custom;if("number"!==typeof a)throw new O(t,n);throw new O(r.errorMapping[a]||t,n)},this.sendTransaction=function(){var e=(0,o.Z)(l().mark((function e(n){var t,s,a,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.serialize(),e.next=3,r.connection.sendRawTransaction(t,{skipPreflight:!0,preflightCommitment:"confirmed"});case 3:return s=e.sent,e.next=6,r.connection.confirmTransaction(s,"confirmed");case 6:if(a=e.sent,!(i=a.value.err)){e.next=10;break}return e.abrupt("return",r.throwError(i,s));case 10:return e.abrupt("return",s);case 11:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),this.addRecentCommitment=function(){var e=(0,o.Z)(l().mark((function e(n){var t,s;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.connection.getRecentBlockhash("confirmed");case 2:return t=e.sent,s=t.blockhash,n.recentBlockhash=s,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),this.addSignature=function(e,n){var r=n.publicKey,t=n.signature;return e.feePayer||(e.feePayer=r),e.addSignature(r,t),e},this.nodeUrl=n,this.errorMapping=t,this.connection=new N.Connection(this.nodeUrl,"confirmed")},M=r(70320),U=["Invalid instruction","Incorrect program id","Operation overflowed","Invalid owner"],L=function(e){(0,E.Z)(r,e);var n=(0,_.Z)(r);function r(e,t,s,a){var i;if((0,R.Z)(this,r),(i=n.call(this,a,U)).bulksenderProgramId=void 0,i.spltProgramId=void 0,i.splataProgramId=void 0,i._splt=void 0,i.checkedTransfer=function(){var e=(0,o.Z)(l().mark((function e(n,r,t,s){var a,c,o,u,d,p,x,h,v,m,b,g,k;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f.account.isAddress(r)){e.next=2;break}throw new Error("Invalid destination address");case 2:if(f.account.isAddress(t)){e.next=4;break}throw new Error("Invalid mint address");case 4:return e.next=6,s.getAddress();case 6:return a=e.sent,c=f.account.fromAddress(a),e.next=10,i._splt.deriveAssociatedAddress(a,t);case 10:return o=e.sent,e.next=13,i._splt.deriveAssociatedAddress(r,t);case 13:return u=e.sent,d=f.account.fromAddress(o),p=f.account.fromAddress(r),x=f.account.fromAddress(u),h=f.account.fromAddress(t),v=new N.Transaction,e.next=21,i.addRecentCommitment(v);case 21:return v=e.sent,m=new M.struct([{key:"code",type:"u8"},{key:"amount",type:"u64"}],{code:0,amount:n}),b=new N.TransactionInstruction({keys:[{pubkey:c,isSigner:!0,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!0},{pubkey:p,isSigner:!1,isWritable:!1},{pubkey:x,isSigner:!1,isWritable:!0},{pubkey:h,isSigner:!1,isWritable:!1},{pubkey:N.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:i.spltProgramId,isSigner:!1,isWritable:!1},{pubkey:N.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:i.splataProgramId,isSigner:!1,isWritable:!1}],programId:i.bulksenderProgramId,data:m.toBuffer()}),v.add(b),v.feePayer=c,e.next=28,s.rawSignTransaction(v);case 28:return g=e.sent,i.addSignature(v,g),e.next=32,i.sendTransaction(v);case 32:return k=e.sent,e.abrupt("return",{txId:k});case 34:case"end":return e.stop()}}),e)})));return function(n,r,t,s){return e.apply(this,arguments)}}(),i.buildCheckedBulkTransferTransaction=function(){var e=(0,o.Z)(l().mark((function e(n,r,t,s){var a,o,u,d,p,x,h,v,m,b,g,k,y,w,j,A,C,T,S,Z,I;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=(0,c.Z)(r),e.prev=1,a.s();case 3:if((o=a.n()).done){e.next=9;break}if(u=o.value,f.account.isAddress(u)){e.next=7;break}throw new Error("Invalid destination address: ".concat(u));case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),a.e(e.t0);case 14:return e.prev=14,a.f(),e.finish(14);case 17:d=(0,c.Z)(n),e.prev=18,d.s();case 20:if((p=d.n()).done){e.next=26;break}if(x=p.value){e.next=24;break}throw new Error("Invalid amount: ".concat(x));case 24:e.next=20;break;case 26:e.next=31;break;case 28:e.prev=28,e.t1=e.catch(18),d.e(e.t1);case 31:return e.prev=31,d.f(),e.finish(31);case 34:if(f.account.isAddress(t)){e.next=36;break}throw new Error("Invalid mint address");case 36:if(n.length===r.length){e.next=38;break}throw new Error("The number of amounts and the number of addresses are unmatcher (".concat(n.length,", ").concat(r.length,")"));case 38:return e.next=40,s.getAddress();case 40:return h=e.sent,v=f.account.fromAddress(h),e.next=44,i._splt.deriveAssociatedAddress(h,t);case 44:return m=e.sent,b=f.account.fromAddress(m),g=f.account.fromAddress(t),k=new N.Transaction,e.next=50,i.addRecentCommitment(k);case 50:k=e.sent,y=new M.struct([{key:"code",type:"u8"},{key:"num_txs",type:"u32"},{key:"amounts",type:"[u64;".concat(n.length,"]")}],{code:1,num_txs:n.length,amounts:n}),w=[{pubkey:v,isSigner:!0,isWritable:!0},{pubkey:b,isSigner:!1,isWritable:!0},{pubkey:g,isSigner:!1,isWritable:!1},{pubkey:N.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:i.spltProgramId,isSigner:!1,isWritable:!1},{pubkey:N.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:i.splataProgramId,isSigner:!1,isWritable:!1}],j=(0,c.Z)(r),e.prev=54,j.s();case 56:if((A=j.n()).done){e.next=67;break}return C=A.value,e.next=60,i._splt.deriveAssociatedAddress(C,t);case 60:T=e.sent,S=f.account.fromAddress(C),Z=f.account.fromAddress(T),w.push({pubkey:S,isSigner:!1,isWritable:!1}),w.push({pubkey:Z,isSigner:!1,isWritable:!0});case 65:e.next=56;break;case 67:e.next=72;break;case 69:e.prev=69,e.t2=e.catch(54),j.e(e.t2);case 72:return e.prev=72,j.f(),e.finish(72);case 75:return I=new N.TransactionInstruction({keys:w,programId:i.bulksenderProgramId,data:y.toBuffer()}),k.add(I),k.feePayer=v,e.abrupt("return",k);case 79:case"end":return e.stop()}}),e,null,[[1,11,14,17],[18,28,31,34],[54,69,72,75]])})));return function(n,r,t,s){return e.apply(this,arguments)}}(),i.simulateBulkTransfer=function(){var e=(0,o.Z)(l().mark((function e(n,r,t,s){var a,c;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.buildCheckedBulkTransferTransaction(n,r,t,s);case 2:return a=e.sent,e.next=5,i.connection.simulateTransaction(a);case 5:if(c=e.sent,!c.value.err){e.next=9;break}return e.abrupt("return",!1);case 9:return e.abrupt("return",!0);case 10:case"end":return e.stop()}}),e)})));return function(n,r,t,s){return e.apply(this,arguments)}}(),i.checkedBulkTransfer=function(){var e=(0,o.Z)(l().mark((function e(n,r,t,s){var a,c,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.buildCheckedBulkTransferTransaction(n,r,t,s);case 2:return a=e.sent,e.next=5,s.rawSignTransaction(a);case 5:return c=e.sent,i.addSignature(a,c),e.next=9,i.sendTransaction(a);case 9:return o=e.sent,e.abrupt("return",{txId:o});case 11:case"end":return e.stop()}}),e)})));return function(n,r,t,s){return e.apply(this,arguments)}}(),!f.account.isAddress(e))throw new Error("Invalid bulksender program address");if(!f.account.isAddress(t))throw new Error("Invalid SPL token program address");if(!f.account.isAddress(s))throw new Error("Invalid SPL associated token program address");return i.bulksenderProgramId=f.account.fromAddress(e),i.spltProgramId=f.account.fromAddress(t),i.splataProgramId=f.account.fromAddress(s),i._splt=new f.SPLT(t,s,a),i}return r}(D),V=L,z=A.sol,F=z.spltAddress,G=z.splataAddress,J=z.bulksenderAddress,Q=z.node,K=function(){var e=(0,t.useDispatch)(),n=(0,p.useState)(!1),r=(0,u.Z)(n,2),d=r[0],x=r[1],h=(0,p.useState)(!1),v=(0,u.Z)(h,2),b=v[0],y=v[1],w=(0,p.useState)([]),j=(0,u.Z)(w,2),A=j[0],C=j[1],T=(0,t.useSelector)((function(e){return e.main})),Z=T.data,I=T.mintAddress,B=(0,s.useAccount)().accounts,W=(0,s.useWallet)().wallet.address,R=(0,p.useMemo)((function(){return!(!Z||!Z.length)&&Z.filter((function(e,n){var r=(0,u.Z)(e,1)[0],t=Z.findIndex((function(e){var n=(0,u.Z)(e,1)[0];return r===n}));return t!==n&&t>-1})).length>0}),[Z]),E=(0,p.useCallback)((0,o.Z)(l().mark((function n(){var r,t,s,a;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r=[],t=(0,c.Z)(Z);try{for(a=function(){var e=(0,u.Z)(s.value,2),n=e[0],t=e[1],a=r.findIndex((function(e){return(0,u.Z)(e,1)[0]===n}));a>=0?r[a][1]=(S(r[a][1])+S(t)).toString():r.push([n,t])},t.s();!(s=t.n()).done;)a()}catch(i){t.e(i)}finally{t.f()}return n.next=5,e(P(r));case 5:case"end":return n.stop()}}),n)}))),[Z,e]),_=(0,p.useCallback)((0,o.Z)(l().mark((function e(){var n,r,t,s;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(!0);case 2:n=new V(J,F,G,Q),r=(0,c.Z)(A),e.prev=4,r.s();case 6:if((t=r.n()).done){e.next=17;break}return s=t.value,e.prev=8,e.delegateYield(l().mark((function e(){var r,t,a,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=window,t=r.sentre.wallet){e.next=3;break}throw new Error("Cannot connect wallet");case 3:return e.next=5,n.checkedBulkTransfer(s.map((function(e){var n=(0,u.Z)(e,2),r=(n[0],n[1]);return S(r)})),s.map((function(e){var n=(0,u.Z)(e,2),r=n[0];n[1];return r})),I,t);case 5:a=e.sent,i=a.txId,window.notify({type:"success",description:"Successfully transfer tokens. Click to view details.",onClick:function(){return window.open((e=i,f.account.isAddress(e)?"https://explorer.solana.com/address/".concat(e,"?cluster=").concat(k.ef):"https://explorer.solana.com/tx/".concat(e,"?cluster=").concat(k.ef)),"_blank");var e}});case 8:case"end":return e.stop()}}),e)}))(),"t0",10);case 10:e.next=15;break;case 12:e.prev=12,e.t1=e.catch(8),window.notify({type:"error",description:e.t1.message});case 15:e.next=6;break;case 17:e.next=22;break;case 19:e.prev=19,e.t2=e.catch(4),r.e(e.t2);case 22:return e.prev=22,r.f(),e.finish(22);case 25:return e.next=27,x(!1);case 27:case"end":return e.stop()}}),e,null,[[4,19,22,25],[8,12]])}))),[A,I]),N=(0,p.useCallback)((0,o.Z)(l().mark((function e(){var n,r,t,s,a,i,c;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Z&&Z.length){e.next=2;break}return e.abrupt("return",y(!0));case 2:if(f.account.isAddress(W)){e.next=4;break}return e.abrupt("return",y("Please connect your wallet"));case 4:if(f.account.isAddress(I)){e.next=6;break}return e.abrupt("return",y("Please select a token to send"));case 6:if(n=Z.filter((function(e){var n=(0,u.Z)(e,2),r=n[0],t=n[1];return!f.account.isAddress(r)||!S(t)})),!(n.length>0)){e.next=9;break}return e.abrupt("return",y(!0));case 9:return r=window,t=r.sentre.splt,e.next=12,t.deriveAssociatedAddress(W,I);case 12:if(s=e.sent,a=B[s]||{amount:BigInt(0)},i=a.amount,c=Z.reduce((function(e,n){var r=(0,u.Z)(n,2),t=(r[0],r[1]);return e+S(t)}),BigInt(0)),!(i<c)){e.next=17;break}return e.abrupt("return",y("Not enough token balance"));case 17:return e.abrupt("return",y(!1));case 18:case"end":return e.stop()}}),e)}))),[Z,I,B,W]);(0,p.useEffect)((function(){N()}),[N]);var O=(0,p.useCallback)((0,o.Z)(l().mark((function e(){var n,r,t,s,a,c,o,d,p,f,h;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!b){e.next=2;break}return e.abrupt("return",C([]));case 2:if(n=window,r=n.sentre.wallet){e.next=5;break}return e.abrupt("return",y("Cannot connect wallet"));case 5:return e.next=7,x(!0);case 7:t=new V(J,F,G,Q),s=(0,i.Z)(Z),a=[[]];case 10:if(!s.length){e.next=30;break}return c=s.shift(),o=(0,u.Z)(c,2),d=o[0],p=o[1],f=a[a.length-1],h=[].concat((0,i.Z)(f),[[d,p]]),e.next=16,t.simulateBulkTransfer(h.map((function(e){var n=(0,u.Z)(e,2),r=(n[0],n[1]);return S(r)})),h.map((function(e){var n=(0,u.Z)(e,2),r=n[0];n[1];return r})),I,r);case 16:if(!e.sent){e.next=21;break}a[a.length-1]=h,e.next=28;break;case 21:if(!(f.length<=1)){e.next=27;break}return e.next=24,y("Cannot handle the transaction. Make sure that your SOL balance is enough to pay fees.");case 24:return e.abrupt("return",x(!1));case 27:a.push([[d,p]]);case 28:e.next=10;break;case 30:return e.next=32,C(a);case 32:return e.abrupt("return",x(!1));case 33:case"end":return e.stop()}}),e)}))),[b,Z,I]);return(0,p.useEffect)((function(){O()}),[O]),(0,m.jsxs)(a.Row,{gutter:[16,16],children:[(0,m.jsx)(a.Col,{span:24,children:"string"===typeof b?(0,m.jsxs)(a.Space,{children:[(0,m.jsx)(g,{name:"information-circle-outline",style:{color:"#F2323F"}}),(0,m.jsx)(a.Typography.Text,{type:"danger",children:b})]}):(0,m.jsxs)(a.Space,{children:[(0,m.jsx)(g,{name:"information-circle-outline"}),(0,m.jsxs)(a.Typography.Text,{type:A.length?void 0:"secondary",children:["To send tokens to ",(0,m.jsx)("strong",{children:Z.length})," address(es), you will need to sign ",(0,m.jsx)("strong",{children:A.length})," time(s) with the total estimated fee is ~",.005*A.length," SOL."]})]})}),(0,m.jsx)(a.Col,{span:12,children:(0,m.jsx)(a.Button,{type:"text",icon:(0,m.jsx)(g,{name:"git-merge-outline"}),onClick:E,disabled:d||!!b||!R,block:!0,children:"Merge"})}),(0,m.jsx)(a.Col,{span:12,children:(0,m.jsx)(a.Button,{type:"primary",icon:(0,m.jsx)(g,{name:"send"}),onClick:_,disabled:!!b,loading:d,block:!0,children:"Send"})})]})},Y=r(24656),q=r.n(Y),X=function(e){return new Promise((function(n,r){return q().parse(e,{skipEmptyLines:!0,complete:function(e){var r=e.data;return n(r)}})}))},H=function(){var e=(0,p.useState)(!1),n=(0,u.Z)(e,2),r=n[0],s=n[1],i=(0,t.useDispatch)(),c=function(){var e=(0,o.Z)(l().mark((function e(n){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s(!0);case 2:return e.t0=i,e.t1=P,e.next=6,X(n);case 6:return e.t2=e.sent,e.t3=(0,e.t1)(e.t2),e.next=10,(0,e.t0)(e.t3);case 10:return e.next=12,s(!1);case 12:return e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),d=function(){var e=(0,o.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s(!0);case 2:return e.next=4,i(P([]));case 4:return e.next=6,s(!1);case 6:return e.abrupt("return",!0);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,m.jsx)(a.Row,{gutter:[24,24],children:(0,m.jsx)(a.Col,{span:24,style:{marginBottom:16},children:(0,m.jsx)(a.Upload.Dragger,{accept:".csv,.txt",beforeUpload:c,onRemove:d,maxCount:1,children:(0,m.jsxs)(a.Space,{direction:"vertical",size:"large",align:"center",children:[(0,m.jsx)(a.Typography.Title,{level:3,children:"Click or Drop file to upload"}),(0,m.jsxs)(a.Typography.Text,{children:["The accepted file types are ",(0,m.jsx)("code",{children:".csv"}),", ",(0,m.jsx)("code",{children:".txt"}),"."]}),(0,m.jsx)(a.Button,{type:"primary",icon:(0,m.jsx)(g,{name:"cloud-upload-outline"}),loading:r,children:"Upload"})]})})})})},$=function(e){var n=e.mintAddress,r=e.onClick,t=void 0===r?function(){}:r,i=e.size,c=void 0===i?24:i,d=(0,s.usePool)().pools,f=(0,s.useMint)().tokenProvider,x=(0,p.useState)([]),h=(0,u.Z)(x,2),v=h[0],b=h[1],k=(0,p.useCallback)((0,o.Z)(l().mark((function e(){var r,t,s,a,i,c,o,u,p;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.findByAddress(n);case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0={};case 5:if(r=e.t0,!(t=r.logoURI)){e.next=9;break}return e.abrupt("return",b([t]));case 9:if(!(s=Object.values(d).find((function(e){return e.mint_lpt===n})))){e.next=27;break}return a=s.mint_a,i=s.mint_b,e.next=14,f.findByAddress(a);case 14:if(e.t1=e.sent,e.t1){e.next=17;break}e.t1={};case 17:return c=e.t1,o=c.logoURI,e.next=21,f.findByAddress(i);case 21:if(e.t2=e.sent,e.t2){e.next=24;break}e.t2={};case 24:return u=e.t2,p=u.logoURI,e.abrupt("return",b([o,p]));case 27:return e.abrupt("return",b([void 0]));case 28:case"end":return e.stop()}}),e)}))),[n,d,f]);return(0,p.useEffect)((function(){k()}),[k]),(0,m.jsx)("span",{onClick:t,children:(0,m.jsx)(a.Avatar.Group,{style:{display:"block"},children:v.map((function(e,n){return(0,m.jsx)(a.Avatar,{src:e,size:c,style:{backgroundColor:"#f0f2f5",border:"none"},children:(0,m.jsx)(g,{name:"diamond-outline"})},n)}))})})},ee=function(e){var n=e.mintAddress,r=(0,p.useState)(""),t=(0,u.Z)(r,2),a=t[0],i=t[1],c=(0,s.usePool)().pools,d=(0,s.useMint)().tokenProvider,f=(0,p.useCallback)((0,o.Z)(l().mark((function e(){var r,t,s,a,o,u,p,f,x,h;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.findByAddress(n);case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0={};case 5:if(r=e.t0,!(t=r.name)){e.next=9;break}return e.abrupt("return",i(t));case 9:if(!(s=Object.values(c).find((function(e){return e.mint_lpt===n})))){e.next=27;break}return a=s.mint_a,o=s.mint_b,e.next=14,d.findByAddress(a);case 14:if(e.t1=e.sent,e.t1){e.next=17;break}e.t1={};case 17:return u=e.t1,p=u.symbol,e.next=21,d.findByAddress(o);case 21:if(e.t2=e.sent,e.t2){e.next=24;break}e.t2={};case 24:return f=e.t2,x=f.symbol,e.abrupt("return",i("".concat(p," \u2022 ").concat(x," LPT")));case 27:return h=n.substring(0,6),e.abrupt("return",i(h));case 29:case"end":return e.stop()}}),e)}))),[d,n,c]);return(0,p.useEffect)((function(){f()}),[f]),(0,m.jsx)("span",{children:a})},ne=function(e){var n=e.mintAddress,r=(0,p.useState)(""),t=(0,u.Z)(r,2),a=t[0],i=t[1],c=(0,s.usePool)().pools,d=(0,s.useMint)().tokenProvider,f=(0,p.useCallback)((0,o.Z)(l().mark((function e(){var r,t,s,a,o,u,p,f,x;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.findByAddress(n);case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0={};case 5:if(r=e.t0,!(t=r.symbol)){e.next=9;break}return e.abrupt("return",i(t));case 9:if(!(s=Object.values(c).find((function(e){return e.mint_lpt===n})))){e.next=27;break}return a=s.mint_a,o=s.mint_b,e.next=14,d.findByAddress(a);case 14:if(e.t1=e.sent,e.t1){e.next=17;break}e.t1={};case 17:return u=e.t1,p=u.symbol,e.next=21,d.findByAddress(o);case 21:if(e.t2=e.sent,e.t2){e.next=24;break}e.t2={};case 24:return f=e.t2,x=f.symbol,e.abrupt("return",i("".concat(p," \u2022 ").concat(x)));case 27:return e.abrupt("return",i("TOKEN"));case 28:case"end":return e.stop()}}),e)}))),[d,n,c]);return(0,p.useEffect)((function(){f()}),[f]),(0,m.jsx)("span",{children:a})},re=function(){var e=(0,t.useDispatch)(),n=(0,p.useState)("0"),r=(0,u.Z)(n,2),i=r[0],c=r[1],d=(0,t.useSelector)((function(e){return e.main})).mintAddress,x=(0,s.useAccount)().accounts,h=(0,s.useWallet)().wallet.address,v=(0,s.useMint)().getMint,b=(0,p.useCallback)((0,o.Z)(l().mark((function e(){var n,r,t,s,a,i,o,u;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f.account.isAddress(d)&&f.account.isAddress(h)){e.next=2;break}return e.abrupt("return",c("0"));case 2:return n=window,r=n.sentre.splt,e.next=5,v({address:d});case 5:return t=e.sent,s=t[d].decimals,e.next=9,r.deriveAssociatedAddress(h,d);case 9:return a=e.sent,i=x[a]||{amount:BigInt(0)},o=i.amount,u=f.utils.undecimalize(o,s),e.abrupt("return",c(u));case 13:case"end":return e.stop()}}),e)}))),[d,h,v,x]);return(0,p.useEffect)((function(){b()}),[b]),(0,m.jsx)(a.Card,{children:(0,m.jsxs)(a.Row,{gutter:[16,16],children:[(0,m.jsx)(a.Col,{span:24,children:(0,m.jsx)(a.Select,{size:"large",placeholder:"Select token",style:{width:"100%"},onChange:function(n){return e(B(n))},children:Object.values(x).map((function(e,n){var r=e.mint;return(0,m.jsx)(a.Select.Option,{value:r,children:(0,m.jsxs)(a.Space,{align:"center",children:[(0,m.jsx)($,{mintAddress:r}),(0,m.jsx)(a.Typography.Text,{type:"secondary",children:(0,m.jsx)(ne,{mintAddress:r})}),(0,m.jsx)(a.Typography.Text,{children:(0,m.jsx)(ee,{mintAddress:r})})]})},r+n)}))})}),(0,m.jsx)(a.Col,{span:24,children:(0,m.jsxs)(a.Space,{children:[(0,m.jsx)(a.Typography.Text,{type:"secondary",children:"Balance:"}),(0,m.jsx)(a.Typography.Text,{children:T()(i||0).format("0,0.[0000]")}),(0,m.jsx)(a.Typography.Text,{children:(0,m.jsx)(ne,{mintAddress:d})})]})})]})})},te=["max","onValue","onChange","onBlur"],se=(0,p.forwardRef)((function(e,n){var r,t=e.max,s=e.onValue,i=void 0===s?function(){}:s,c=e.onChange,o=void 0===c?function(){}:c,d=e.onBlur,l=void 0===d?function(){}:d,f=(0,h.Z)(e,te),v=(0,p.useState)(""),b=(0,u.Z)(v,2),k=b[0],w=b[1],j=(0,p.useState)(null),A=(0,u.Z)(j,2),C=A[0],T=A[1],S=(0,p.useRef)(n),Z=(0,p.useCallback)((function(e){var n=function(e){y&&(clearTimeout(y),y=void 0),w(e),y=setTimeout((function(){return w("")}),500)};return/^\d*(\.\d*)?$/.test(e)?t&&parseFloat(e)>parseFloat(t.toString())?n("Not enough balance"):i(e):n("Invalid character")}),[t,i]);return null===S||void 0===S||null===(r=S.current)||void 0===r||r.setSelectionRange(C,C),(0,m.jsx)(a.Tooltip,{title:(0,m.jsxs)(a.Space,{children:[(0,m.jsx)(g,{name:"warning"}),k]}),visible:!!k,children:(0,m.jsx)(a.Input,(0,x.Z)((0,x.Z)({},f),{},{onBlur:function(e){l(e);var n=Number(e.target.value);e.target.value&&Z(n?n.toString():"")},onChange:function(e){o(e),T(e.target.selectionStart),Z(e.target.value||"")},ref:S}))})})),ae=function(e){var n=e.index,r=e.address,t=e.amount,s=e.onClick,i=void 0===s?function(){}:s,c=e.warning,o=void 0===c?"":c,u=e.error,d=void 0===u?"":u;return(0,m.jsxs)(a.Row,{gutter:[16,8],children:[(0,m.jsx)(a.Col,{span:24,children:(0,m.jsxs)(a.Row,{gutter:[16,8],align:"middle",wrap:!1,children:[(0,m.jsx)(a.Col,{children:(0,m.jsxs)(a.Typography.Text,{type:"secondary",children:["#",n+1]})}),(0,m.jsx)(a.Col,{span:12,children:(0,m.jsx)(a.Tooltip,{title:r,children:(0,m.jsx)(a.Typography.Text,{ellipsis:!0,children:r})})}),(0,m.jsx)(a.Col,{flex:"auto",children:(0,m.jsx)(a.Typography.Text,{children:S(t)?T()(t).format("0,0"):t})}),(0,m.jsx)(a.Col,{children:(0,m.jsxs)(a.Space,{align:"center",children:[o?(0,m.jsx)(a.Tooltip,{title:o,children:(0,m.jsx)(g,{name:"alert-circle-outline",style:{color:"#FCB017"}})}):null,d?(0,m.jsx)(a.Tooltip,{title:d,children:(0,m.jsx)(g,{name:"warning-outline",style:{color:"#F2323F"}})}):null,(0,m.jsx)(a.Button,{type:"text",icon:(0,m.jsx)(g,{name:"trash-outline"}),onClick:function(){return i(n)}})]})})]})}),(0,m.jsx)(a.Col,{span:24,children:(0,m.jsx)(a.Divider,{style:{margin:0}})})]})},ie=function(e){var n=e.value,r=e.onClick,t=void 0===r?function(){}:r,s=e.onChange,i=void 0===s?function(){}:s,c=n.address,o=n.amount;return(0,m.jsxs)(a.Row,{gutter:[16,8],align:"middle",wrap:!1,children:[(0,m.jsx)(a.Col,{span:12,children:(0,m.jsx)(a.Input,{placeholder:"Address",value:c,onChange:function(e){return i((0,x.Z)((0,x.Z)({},n),{},{address:e.target.value}))}})}),(0,m.jsx)(a.Col,{flex:"auto",children:(0,m.jsx)(se,{placeholder:"Amount",value:o,onValue:function(e){return i((0,x.Z)((0,x.Z)({},n),{},{amount:e}))}})}),(0,m.jsx)(a.Col,{children:(0,m.jsx)(a.Button,{type:"primary",icon:(0,m.jsx)(g,{name:"add-outline"}),onClick:function(){if(f.account.isAddress(c)&&S(o))return t()}})})]})},ce=function(){var e=(0,t.useDispatch)(),n=(0,p.useState)({address:"",amount:""}),r=(0,u.Z)(n,2),s=r[0],c=r[1],d=(0,t.useSelector)((function(e){return e.main})).data,x=function(){var n=(0,o.Z)(l().mark((function n(){var r;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return(r=(0,i.Z)(d)).push([s.address,s.amount]),n.next=4,e(P(r));case 4:return n.abrupt("return",c({address:"",amount:""}));case 5:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),h=function(n){var r=(0,i.Z)(d);return r.splice(n,1),e(P(r))};return(0,m.jsx)(a.Card,{bodyStyle:{padding:16,cursor:"pointer",height:228,overflow:"auto"},hoverable:!0,children:(0,m.jsxs)(a.Row,{gutter:[8,8],children:[d.length?null:(0,m.jsx)(a.Col,{span:24,children:(0,m.jsx)(a.Typography.Text,{type:"secondary",children:"No Data"})}),d.map((function(e,n){var r=(0,u.Z)(e,2),t=r[0],s=r[1],i=f.account.isAddress(t)?S(s)?"":"Invalid amount":"Invalid address",c=d.slice(0,n).findIndex((function(e){return(0,u.Z)(e,1)[0]===t})),o=c>=0?"Duplicated address to #".concat(c):"";return(0,m.jsx)(a.Col,{span:24,children:(0,m.jsx)(ae,{index:n,address:t,amount:s,onClick:h,error:i,warning:o})},t+n)})),(0,m.jsx)(a.Col,{span:24,children:(0,m.jsx)(ie,{value:s,onChange:c,onClick:x})})]})})},oe=function(){return(0,m.jsxs)(a.Row,{gutter:[24,24],justify:"center",children:[(0,m.jsx)(a.Col,{span:24,style:{maxWidth:1200},children:(0,m.jsxs)(a.Row,{gutter:[24,24],children:[(0,m.jsx)(a.Col,{span:24,children:(0,m.jsx)(a.Typography.Title,{level:3,children:"Solana Bulk Sender"})}),(0,m.jsx)(a.Col,{xs:{span:24},md:{span:12},children:(0,m.jsxs)(a.Row,{gutter:[24,24],children:[(0,m.jsx)(a.Col,{span:24,children:(0,m.jsx)(re,{})}),(0,m.jsx)(a.Col,{span:24,children:(0,m.jsx)(H,{})})]})}),(0,m.jsx)(a.Col,{xs:{span:24},md:{span:12},children:(0,m.jsxs)(a.Row,{gutter:[24,24],children:[(0,m.jsx)(a.Col,{span:24,children:(0,m.jsx)(ce,{})}),(0,m.jsx)(a.Col,{span:24,children:(0,m.jsx)(K,{})})]})})]})}),(0,m.jsx)(a.Col,{span:24})]})},ue=function(){var e=(0,s.useUI)().ui,n=e.width,r=e.infix;return(0,m.jsx)(a.Row,{gutter:[24,24],children:(0,m.jsxs)(a.Col,{span:24,children:[(0,m.jsx)(a.Typography.Title,{level:5,children:"BulkSender Widget"}),(0,m.jsxs)(a.Typography.Text,{children:["Env: ",k.OB," - ",n,"px - ",r]})]})})};BigInt.prototype.toJSON=function(){return this.toString()};var de={serializableCheck:{isSerializable:function(e){return"undefined"===typeof e||null===e||"string"===typeof e||"boolean"===typeof e||"number"===typeof e||Array.isArray(e)||function(e){if(null===e)return!1;var n=Object.getPrototypeOf(e);return null!==n&&null===Object.getPrototypeOf(n)}(e)||"bigint"===typeof e}}},le=(0,Z.configureStore)({middleware:function(e){return e(de)},devTools:!1,reducer:{main:W}}),pe=A.manifest.appId,fe=function(){return(0,m.jsx)(s.UIProvider,{appId:pe,antd:{prefixCls:pe},children:(0,m.jsx)(s.WalletProvider,{children:(0,m.jsx)(s.AccountProvider,{children:(0,m.jsx)(s.MintProvider,{children:(0,m.jsx)(s.PoolProvider,{children:(0,m.jsx)(t.Provider,{store:le,children:(0,m.jsx)(oe,{})})})})})})})},xe={size:"small",type:"solid"},he=function(){return(0,m.jsx)(s.UIProvider,{appId:pe,antd:{prefixCls:pe},children:(0,m.jsx)(s.WalletProvider,{children:(0,m.jsx)(s.AccountProvider,{children:(0,m.jsx)(s.MintProvider,{children:(0,m.jsx)(s.PoolProvider,{children:(0,m.jsx)(t.Provider,{store:le,children:(0,m.jsx)(ue,{})})})})})})})}},63805:function(e,n,r){"use strict";r.d(n,{OB:function(){return s},ef:function(){return a}});var t=r(53933),s="production",a=function(){switch(t.Z.get("network")){case"devnet":return"devnet";case"testnet":return"testnet";default:return"mainnet"}}()},53933:function(e,n){"use strict";var r="sentre",t=window.localStorage,s=function(e){if(!e)return null;try{return JSON.parse(e)}catch(n){return null}},a={set:function(e,n){var a=s(t.getItem(r));a&&"object"===typeof a||(a={}),a[e]=n,t.setItem(r,JSON.stringify(a))},get:function(e){var n=s(t.getItem(r));return n&&"object"===typeof n?n[e]:null},clear:function(e){a.set(e,null)}};n.Z=a},46601:function(){},89214:function(){},85568:function(){},52361:function(){},94616:function(){},55024:function(){}}]);
//# sourceMappingURL=680.43643cb4.chunk.js.map